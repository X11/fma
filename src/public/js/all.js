!function(){var t=10;$(document).ready(function(){$("[data-counter]").each(function(){function e(){if(s+=c,a>s)i.html(s);else if(s>a)return i.html(a);setTimeout(e,t)}var i=$(this),a=i.data("counter"),n=i.data("counterTime"),s=0,o=n/t,c=Math.ceil(a/o);setTimeout(e,t)})})}(),$("a.is-danger").on("click",function(t){return window.confirm("Are you sure?")}),function(){"use strict";$(".header-toggle").click(function(){$(this).parent().find(".header-right").toggleClass("is-active")})}(),function(){"use strict";function t(t){t?i.hide():i.show()}var e=$("#hide-more"),i=$(".more"),a="true"==localStorage.getItem("hide-more-value");e.prop("checked",a),t(a),e.on("change",function(i){var a=e.prop("checked");t(a),localStorage.setItem("hide-more-value",a.toString())})}(),function(){"use strict";function t(t){t?i.hide():i.show()}var e=$("#hide-posters"),i=$(".serie-poster"),a="true"==localStorage.getItem("hide-posters-value");e.prop("checked",a),t(a),e.on("change",function(i){a=e.prop("checked"),t(a),localStorage.setItem("hide-posters-value",a.toString())})}(),function(){"use strict";function t(t){t?i.hide():i.show()}var e=$("#hide-watched"),i=$(".is-watched"),a="true"==localStorage.getItem("hide-watched-value");e.prop("checked",a),t(a),e.on("change",function(i){var a=e.prop("checked");t(a),localStorage.setItem("hide-watched-value",a.toString())})}(),jQuery.fn.exists=function(){return jQuery(this).length>0},function(t){t.fn.unveil=function(e,i){function a(){var e=h.filter(function(){var e=t(this);if(!e.is(":hidden")){var i=s.scrollTop(),a=i+s.height(),n=e.offset().top,c=n+e.height();return c>=i-o&&a+o>=n}});n=e.trigger("unveil"),h=h.not(n)}var n,s=t(window),o=e||0,c=window.devicePixelRatio>1,r=c?"data-src-retina":"data-src",h=this;return this.one("unveil",function(){var t=this.getAttribute(r);t=t||this.getAttribute("data-src"),t&&(this.setAttribute("src",t),"function"==typeof i&&i.call(this))}),s.on("scroll.unveil resize.unveil lookup.unveil",a),a(),this}}(window.jQuery||window.Zepto),function(){function t(t,i){$.ajax({url:"/episode/"+i+"/watched?_token="+e,cache:!1,method:t?"POST":"DELETE",json:!0,success:function(t){$.notify(t.status,"success")}})}var e=$('meta[name="csrf-token"]').attr("content");$(".mark-episode").each(function(){var e=$(this),i=$(this).data("watchedInitial"),a=$(this).data("watchedContent").split("|"),n=$(this).data("watchedClass").split("|"),s=$(this).data("watchedEpisode"),o=($(this).data("watchedSeason"),i?1:0);e.html(a[o]),e.removeClass("is-loading"),e.addClass(n[o]),e.click(function(){return e.removeClass(n[o]),o=0===o?1:0,t(o,s),e.html(a[o]),e.addClass(n[o]),!1})}),$(".mark-season").each(function(){var t=$(this),e=$(this).data("watchedSeason");t.click(function(){var t=0;$('.mark-episode[data-watched-season="'+e+'"]').each(function(){var e=$(this);setTimeout(function(){e.click()},100*t),t++})})})}(),function(){function t(t,i){$.ajax({url:"/watchlist/"+i+"?_token="+e,cache:!1,method:t?"POST":"DELETE",json:!0,success:function(t){$.notify(t.status,"success")}})}var e=$('meta[name="csrf-token"]').attr("content");$(".mark-serie").each(function(){var e=$(this),i=$(this).data("markInitial"),a=$(this).data("markContent").split("|"),n=$(this).data("markClass").split("|"),s=$(this).data("markSerie"),o=i?1:0;e.html(a[o]),e.removeClass("is-loading"),e.addClass(n[o]),e.click(function(){return e.removeClass(n[o]),o=0===o?1:0,t(o,s),e.html(a[o]),e.addClass(n[o]),!1})})}(),function(){"use strict";$("#selectAll").click(function(){var t=$(this).prop("checked");$(this).parents("form").find('input[type="checkbox"]').each(function(){$(this).prop("checked",t)})})}(),function(){"use strict";var t=$(".series"),e=$(".serie");e.hover(function(e){$(this).addClass("selected"),t.addClass("darken")},function(e){$(this).removeClass("selected"),t.removeClass("darken")})}(),$(".tabs a[tab-href]").on("click",function(){var t=$(this).attr("tab-href"),e=t.split("/");$("#"+e[0]+"> *").each(function(){var t=$(this);t.removeClass("is-active"),e[1]==t.attr("tab-id")&&t.addClass("is-active")}),$(this).parents("ul").find("li").each(function(){$(this).removeClass("is-active")}),$(this).parent("li").addClass("is-active"),history.replaceState(e,"","#"+t)}),window.addEventListener("load",function(t){var e=location.hash.slice(1);$('[tab-href="'+e+'"]').click()}),function(){var t=1e4,e={Done:100,Transfering:75,Downloading:50,Initializing:25};$(".file-download").each(function(){function i(){$.ajax({url:"/episodefile/"+a,cache:!1,success:function(a){n.html(a.status),s.attr("value",e[a.status]),a.file?location.reload():setTimeout(i,t)}})}var a=$(this).data("fileid"),n=$(this).find(".status"),s=$(this).find(".progress");s.attr("value",e[n.text()]),"Done"!=n.text()&&setTimeout(i,5e3)})}();